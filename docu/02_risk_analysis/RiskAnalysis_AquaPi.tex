\documentclass{../../git_submodules/common_docu/doc_class}
\usepackage{../../git_submodules/common_docu/risk_class}
\input{../latex_common/latex_project.tex}
  
\author{\defaultAuthor}
\date{2019-04-04}
\project{\ThisProjectName}
%\projectsub{subproject} % i.e. "GUI"
\doctitle{Risk Analysis}
\projectversion{1.0}
 
\begin{document}

\RiskRelatedActionsPerDay{20}
\YearsLifeTime{10}

% probability that a hazardous situation might occur
\DefineInnerProbability{inconceivable}{140000}{not in product lifetime}
\DefineInnerProbability{exceptionally}{70000}{once in product lifetime}
\DefineInnerProbability{rarely}{20000}{every few years}
\DefineInnerProbability{occasionally}{2000}{every few months}
\DefineInnerProbability{probably}{200}{every few days}
\DefineInnerProbability{frequently}{20}{daily}
\DefineInnerProbability{regularly}{1}{nearly always}

% probability that a hazardous situation might result in a harm
\DefineOuterProbability{exceptionally}{1000}
\DefineOuterProbability{rarely}{100}
\DefineOuterProbability{occasionally}{10}
\DefineOuterProbability{sometimes}{5}
\DefineOuterProbability{most likely}{2}
\DefineOuterProbability{always}{1}


  
  \section{Purpose}
  The purpose of this document is to identify and to evaluate possible risks, to define appropriate risk mitigation measures and to gain awareness about the amount of remaining risk.
  
  The Risk Analysis thus is a major input document for the entire project development.
  
  \subsection{Scope}
  Subject of this document is the project \textit{\ThisProjectName}. \\
  A brief project description and the intended use of \ThisProjectName~can be obtained from the corresponding project description document.
  \newpage
  
  \section{Risk definitions}

  \subsection{Severity}
  Concerning risk severity it has to taken into account that \ThisProjectName~ controls an aquarium and risks therefore may apply to 
  \begin{itemize}
    \item persons -- user(s) and third party persons,
    \item animals -- inside the aquarium,
    \item material values -- e.g. the aquarium itself, aquarium devices, environment, \dots.
  \end{itemize}
  
  \begin{table}[H]
    \begin{tabularx}{\textwidth}{|l|X|}
      \hline
      \textbf{Severity} & \textbf{Definition} \\
      \hline
      \textbf{insignificant} & Persons: Inconvenience or temporary discomfort. \newline
      Animals: Self-healing injury or impairment. \newline
      Material values: Loss of value \textless{} 1 \euro. \\
      \hline
      \textbf{minor} & Persons: Injury or impairment not requiring medical intervention. \newline
      Animals: Irreversible injury or impairment.\newline
      Material values: Loss of value \textgreater= 1 \euro{} .. \textless{} 10 \euro. \\
      \hline
      \textbf{moderate} & Persons: Injury or impairment requiring medical intervention. \newline
      Animals: Death of one animal. \newline
      Material values: Loss of value \textgreater= 10 \euro{} .. \textless{} 100 \euro. \\
      \hline
      \textbf{serious} & Persons: Injury or impairment requiring professional medical intervention. \newline
      Animals: Death of several animals. \newline
      Material values: Loss of value \textgreater= 100 \euro. \\
      \hline
      \textbf{critical} & Persons: Permanent impairment or life-threatening injury. \\
      \hline
      \textbf{catastrophic} & Persons: Death.\\
      \hline
    \end{tabularx}
    \caption{Definition of risk severities}
  \end{table}


\subsection{Probability}

\subsubsection{Probability that a hazardous situation occurs}

\ThisProjectName~ controls various aquarium devices by activating/deactivating relay switches following user configurable schedules.\\
It is reasonable to assume that any aquarium device is activated once and deactivated once per day.

Since 8 relays can be controlled, plus possibly a few further devices controlled using PWM or GPIO outputs of the Raspberry Pi, it is assumed that \NumRiskRelatedActionsPerDay~\textit{risk related actions} per day will be performed.\\
In \NumYearsLifeTime~ years of expected device lifetime that makes a total of \FPeval{\result}{clip(\NumYearsLifeTime * 365 * \NumRiskRelatedActionsPerDay)}\numprint{\result}~actions.

The graduation of risk probabilities is chosen such way, that a \textit{inconceivable} risk clearly will not occur during the expected device time while a \textit{frequently} risk will occur once a day.

\begin{table}[H]
  \begin{tabularx}{\textwidth}{|l|X|X|X|}
    \hline
	\textbf{Probability} & \textbf{Probability per action} & \textbf{Occurrences per lifetime and device} &
	\textbf{Statistically mean time between occurrence (days)} \\
    \hline
	\PrintInnerProbabilityRow{inconceivable}{$\leq$}
	\PrintInnerProbabilityRow{exceptionally}{$\leq$}
	\PrintInnerProbabilityRow{rarely}{$\leq$}
	\PrintInnerProbabilityRow{occasionally}{$\leq$}
	\PrintInnerProbabilityRow{probably}{$\leq$}
	\PrintInnerProbabilityRow{frequently}{$\leq$}
	\PrintInnerProbabilityRow{regularly}{$\leq$}
  \end{tabularx}
  \caption{Definition of risk probabilities (inner sequence of events)}
\end{table}

Parameters used for calculation:
\begin{itemize}
	\item \NumRiskRelatedActionsPerDay~risk related actions per day
	\item \NumYearsLifeTime~years device lifetime
\end{itemize}

\subsubsection{Probability that a hazardous situation results in a harm}
\begin{table}[H]
	\begin{tabularx}{\textwidth}{|l|X|}
		\hline
		\textbf{Probability} & \textbf{Probability of harm} \\
		\hline
		\PrintOuterProbabilityRow{exceptionally}{$\leq$}
		\PrintOuterProbabilityRow{rarely}{$\leq$}
		\PrintOuterProbabilityRow{occasionally}{$\leq$}
		\PrintOuterProbabilityRow{sometimes}{$\leq$}
		\PrintOuterProbabilityRow{most likely}{$\leq$}
		\PrintOuterProbabilityRow{always}{$\leq$}
	\end{tabularx}
	\caption{Definition of risk probabilities (outer sequence of events)}
\end{table}


\subsection{Risk acceptance}

\DefineRiskAcceptance{insignificant}{100}
\DefineRiskAcceptance{minor}{1000}
\DefineRiskAcceptance{moderate}{10000}
\DefineRiskAcceptance{serious}{100000}
\DefineRiskAcceptance{critical}{1000000}
\DefineRiskAcceptance{catastrophic}{10000000}

\begin{table}[H]
	\centering
	\begin{tabular}{l>{\small}l|c|c|c|c|c|c|}
		%    \cline{3-8}
		\hhline{~~------}
		\multicolumn{2}{l|}{\multirow{2}{*}{}} & \multicolumn{6}{c|}{\textbf{Severity}} \\ %\cline{3-78 
		\multicolumn{2}{l|}{} & \small{insignificant} &\small{ minor} & \small{moderate} & \small{serious} & \small{critical} & \small{catastrophic} \\ \hline
		
		\multicolumn{1}{|c}{\multirow{7}{*}{\textbf{Total probability}}} & $\leq$ 1 : \numprint{10000000} & 
		\cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} \\ \hhline{|~-------}
		
		\multicolumn{1}{|l}{} & $\leq$ 1 : \numprint{1000000} & 
		\cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskRed} \\ \hhline{|~-------}

		\multicolumn{1}{|l}{} & $\leq$ 1 : \numprint{100000} & 
		\cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} \\ \hhline{|~-------}
		
		\multicolumn{1}{|l}{} & $\leq$ 1 : \numprint{10000} & 
		\cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} \\ \hhline{|~-------}
		
		\multicolumn{1}{|l}{} & $\leq$ 1 : \numprint{1000} & 
		\cellcolor{colorRiskYellow} & \cellcolor{colorRiskYellow} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} \\ \hhline{|~-------}
		
		\multicolumn{1}{|l}{} & $\leq$ 1 : 100 & 
		\cellcolor{colorRiskYellow} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} \\ \hhline{|~-------}
		
		\multicolumn{1}{|l}{} & $>$ 1 : 100 & 
		\cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} & \cellcolor{colorRiskRed} \\ \hline
		
	\end{tabular}
	\caption{Risk acceptance matrix}
\end{table}


\begin{table}[H]
  \begin{tabularx}{\textwidth}{|l|X|}
    \hline
    \cellcolor{colorRiskRed} ~ \newline ~ \newline \textbf{RISK NOT ACCEPTED} & These risks are generally not accepted. \newline If any residual risk of this kind remains, \ThisProjectName~will not be installed.\\
    \hline
    \cellcolor{colorRiskYellow} ~ \newline ~ \newline \textbf{RISK ACCEPTED} & The remaining risks are accepted when the following aspects have been considered:\small\newline
    - risks have been reduced as much as possible regardless of severity or probability\newline
    - further risk mitigation measures could not increase the safety of the product \\
    \hline
  \end{tabularx}
\end{table}

\include{sections/section_riskanalysis}
  
  
\end{document}
